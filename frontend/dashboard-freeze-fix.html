<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Freeze Fix</title>
</head>
<body>
    <h1>Dashboard Freeze Diagnostic</h1>
    <p>Testing API endpoints...</p>
    <div id="results"></div>
    
    <script>
    async function testEndpoints() {
        const results = document.getElementById('results');
        const API_BASE = 'http://localhost:8420/api/v1';
        
        // Test each endpoint
        const endpoints = [
            '/monitoring/system',
            '/cosmos/containers',
            '/messages?limit=1',
            '/docs/structure'
        ];
        
        for (const endpoint of endpoints) {
            try {
                const start = Date.now();
                const response = await fetch(API_BASE + endpoint);
                const time = Date.now() - start;
                
                if (response.ok) {
                    const data = await response.json();
                    results.innerHTML += `<p style="color: green">✓ ${endpoint} - OK (${time}ms)</p>`;
                    
                    // Show data size
                    if (Array.isArray(data)) {
                        results.innerHTML += `<p>&nbsp;&nbsp;&nbsp;→ Array with ${data.length} items</p>`;
                    } else if (data.containers) {
                        results.innerHTML += `<p>&nbsp;&nbsp;&nbsp;→ ${data.containers.length} containers</p>`;
                    }
                } else {
                    results.innerHTML += `<p style="color: red">✗ ${endpoint} - Error ${response.status}</p>`;
                }
            } catch (error) {
                results.innerHTML += `<p style="color: red">✗ ${endpoint} - ${error.message}</p>`;
            }
        }
        
        results.innerHTML += '<h2>Recommendations:</h2>';
        results.innerHTML += '<p>1. Clear browser cache (Cmd+Shift+Delete)</p>';
        results.innerHTML += '<p>2. Open dashboard in incognito/private window</p>';
        results.innerHTML += '<p>3. Check browser console for errors (F12)</p>';
    }
    
    testEndpoints();
    </script>
</body>
</html>